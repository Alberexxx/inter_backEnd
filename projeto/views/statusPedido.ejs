<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/statusPedido/styles.css">
    <title>Meus Pedidos</title>
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
    rel="stylesheet"/>
    <script src="/js/statusPedido/script.js"></script>
</head>
<body>

    <%- include('./partials/navbar.ejs') %>


    <header>
        <img src="logo.png" width="200px">
        <div class="dark-mode">
            <button onclick="darkMode()" ><i class='bx bx-moon'></i></button>
           </div>
    </header>

    <div class="container">
        <h1>Meus Pedidos</h1>
        <div class="ordem-lista">

         <!--   <%# let numeroPedido = 1; %>
            <%# pedidos.forEach(pedido => { %>
             <div class="ordem-item">
                <h3>Pedido <%#=  numeroPedido %></h3>
                <p>Produto: </p>
                <p>Quantidade de produtos: 1</p>
                <p>Total: <%#= pedido.ValorTotal %></p>
                <p>Data: <%#= pedido.createdAt %></p>
                <p class="status-process">Status: <%#= pedido.status %></p>
            </div>
            <%# numeroPedido++; %>

            <%# }) %>
            -->

            <% let numeroPedido = 1; %>
            <% pedidos.forEach(pedido => { %>
                <div class="ordem-item">
                    <h2>Pedido <%=  numeroPedido %></h2>
                    <p><strong>Produtos:</strong>
                        <% pedido.itensPedidos.forEach(itemPedido => { %>
                           
                            <%= produtos.find(produto => produto.id_produto === itemPedido.productIdProduto) ? produtos.find(produto => produto.id_produto === itemPedido.productIdProduto).nome_produto + ';' : 'N/A' %>
                            
                            <% }) %>
                    </p>
                   
                   
                    
                    <p><strong>Total: </strong> R$<%= pedido.pedido.ValorTotal %></p>
                    <p><strong>Data:</strong><%= pedido.pedido.data_realizacao %></p>
                    
                    <p class="status-process">Status: <strong><%= pedido.pedido.status %></strong></p>
                    
                </div>
                
                <% numeroPedido++; %>
            <% }) %>
            
            


            
         </div>
        </body>
        </html>


